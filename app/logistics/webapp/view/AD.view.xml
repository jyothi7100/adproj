<mvc:View controllerName="logistics.controller.AD"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:viz="sap.viz.ui5.controls"
  xmlns:viz.data="sap.viz.ui5.data"
  xmlns:vizFeeding="sap.viz.ui5.controls.common.feeds"
  xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"

    displayBlock="true">
    <Page id="page">
       <IconTabBar id="mainTabs" selectedKey="dashboard">
      <items>
        <IconTabFilter id="_IDGenIconTabFilter1" key="dashboard" text="Dashboard" icon="sap-icon://home">
          <VBox class="sapUiSmallMargin">

          
<HBox >
<Panel height= "500px" headerText=" Mode of Transport " class="sapUiSmallMarginBegin" width="500px">
         
<viz:VizFrame
    id="idTransportModePie"
    uiConfig="{applicationSet:'fiori'}"
    vizType="pie"
    width="100%"
    height="300px"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    vizProperties="{
  plotArea: {
    dataLabel: {
      visible: true,
      formatString: '#0%'  
    }
  },
  title: {
    visible: false
  }
}"
>

    <viz:dataset>
        <viz.data:FlattenedDataset data="{transportChart>/data}">
            <viz.data:dimensions>
                <viz.data:DimensionDefinition name="TransportMode" value="{TransportMode}" />
            </viz.data:dimensions>
            <viz.data:measures>
                <viz.data:MeasureDefinition name="Count" value="{Count}" />
            </viz.data:measures>
        </viz.data:FlattenedDataset>
    </viz:dataset>

    <viz:feeds>
        <viz.feeds:FeedItem uid="size" type="Measure" values="Count"/>
        <viz.feeds:FeedItem uid="color" type="Dimension" values="TransportMode"/>
    </viz:feeds>
</viz:VizFrame>
   </Panel> 
    <Panel height= "500px" headerText="Status of Purchase Order" class="sapUiSmallMarginBegin" width="500px">
<viz:VizFrame
    id="idVizFrame"
    vizType="bar"
    height="400px"
    width="100%"
    uiConfig="{applicationSet:'fiori'}"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
  vizProperties="{
  plotArea: {
    colorPalette: ['#3399FF', '#4d9084', '#A0A0A0'],
    dataLabel: {
      visible: true,
      formatString: '#,##0',
      position: 'outside'
    }
    
  },
  valueAxis: {
    visible: true,
    title: {
      visible: true
    },
    label: {
      visible: true
    }
  },
  categoryAxis: {
    visible: true,
    title: {
      visible: true
    },
    label: {
      visible: true   
        
    }
  },
  legend: {
    visible: true
  },
  title: {
    visible: false
  }
}"

>

    <!-- FlattenedDataset bound to chart JSONModel -->
    <viz:dataset>
        <viz.data:FlattenedDataset data="{chart>/data}">
            <viz.data:dimensions>
                <viz.data:DimensionDefinition name="Status" value="{Status}" />
            </viz.data:dimensions>
            <viz.data:measures>
                <viz.data:MeasureDefinition name="Count" value="{count}" />
            </viz.data:measures>
        </viz.data:FlattenedDataset>
    </viz:dataset>

    <viz:feeds>
        <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="Count"/>
        <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="Status"/>
        <viz.feeds:FeedItem uid="color" type="Dimension" values="Status" />
    </viz:feeds>

</viz:VizFrame>
</Panel>
</HBox>

<Panel height="500px" headerText="Shipments by Department" class="sapUiSmallMarginBegin" width="500px">
  <viz:VizFrame
      id="idDeptChart"
      vizType="column"
      height="400px"
      width="100%"
      uiConfig="{applicationSet:'fiori'}"
      vizProperties="{
        plotArea: {
          dataLabel: { visible: true, formatString: '#,##0' }
        },
        categoryAxis: { title: { visible: true, text: 'Department' } },
        valueAxis: { title: { visible: true, text: 'Shipments' } },
        legend: { visible: false },
        title: {
    visible: false
  }
      }">

    <viz:dataset>
      <viz.data:FlattenedDataset data="{deptChart>/data}">
        <viz.data:dimensions>
          <viz.data:DimensionDefinition name="Department" value="{deptChart>Department}" />
        </viz.data:dimensions>
        <viz.data:measures>
          <viz.data:MeasureDefinition name="Shipments" value="{deptChart>ShipmentCount}" />
        </viz.data:measures>
      </viz.data:FlattenedDataset>
    </viz:dataset>

    <viz:feeds>
      <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="Department" />
      <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="Shipments" />
      <viz.feeds:FeedItem uid="color" type="Dimension" values="Department" />
    </viz:feeds>
  </viz:VizFrame>
</Panel>




      </VBox>
        </IconTabFilter>

        <IconTabFilter id="_IDGenIconTabFilter2" key="orders" text="Orders" icon="sap-icon://sales-order">
       <HBox justifyContent="End" class="sapUiSmallMarginTop">
  <Button text="Sent" type="Emphasized" press="onSentPress" />
</HBox>


           <VBox id="_IDGenVBox5">
            <Table id="poTable"
                   items="{ path: '/PurchaseOrders' }"
                   growing="true"
                   growingScrollToLoad="true">
              <columns>
               <Column width="2rem" />
                <Column id="_IDGenColumn"><Text id="_IDGenText1" text="PO Number"/></Column>
                <Column id="_IDGenColumn1"><Text id="_IDGenText5" text="Supplier"/></Column>
                
                <Column id="_IDGenColumn5"><Text id="_IDGenText9" text="Supplier Location"/></Column>
                <Column id="_IDGenColumn53"><Text id="_IDGenText95" text="Freight Forwarder"/></Column>
                <Column id="_IDGenColumn3"><Text id="_IDGenText7" text="Plant"/></Column>
                <Column id="_IDGenColumn4"><Text id="_IDGenText8" text="Plant Location"/></Column>
                <Column id="_IDGenColumn6"><Text id="_IDGenText09" text="Department"/></Column>
                
                
              </columns>
              <items>
                <ColumnListItem id="_IDGenColumnListItem">
                  <cells>
                   <CheckBox selected="{Selected}" />
                   <Link id="_IDGenLink1" text="{OrderNo}" press=".onPONumberPress"  />
                    <Text id="_IDGenText10" text="{Supplier}" />
                     <Text id="_IDGenText20" text="{SupplierLocation}" />
                     <Text id="_IDGenText27" text="{FreightVendor}" />
                    
                    <Text text="{= ${Plant} + ' (' + ${PlantCode} + ')' }" />

                    <Text id="_IDGenText14" text="{PlantLocation}" />
                    <Text id="_IDGenText21" text="{Department}" />
                   
                    
                  </cells>
                </ColumnListItem>
              </items>
            </Table>
          </VBox>
           
          
        </IconTabFilter>

        <IconTabFilter id="_IDGenIconTabFilter3" key="receivings" text="Receivings" icon="sap-icon://inbox">
          <VBox id="_IDGenVBox2">
            <Table
  id="receivingsTable"
  items="{
    path: '/Receivings',
    parameters: { $expand: 'parent' }
  }"
  inset="false"
  growing="true"
  growingScrollToLoad="true"
  width="100%"
  mode="None">

  <columns>
  <Column>
      <Text text="Order No" />
    </Column>
    <Column>
      <Text text="Receiving Number" />
    </Column>
    <Column>
      <Text text="Transport Mode" />
    </Column>
    <Column>
      <Text text="Status" />
    </Column>
   
    <Column>
      <Text text="Date Received" />
    </Column>
  </columns>

  <items>
    <ColumnListItem>
      <cells>
       <Text text="{parent/OrderNo}" />
        <Text text="{ReceivingNumber}" />
        <Text text="{TransportMode}" />
        <Text text="{Status}" />
       
        <Text text="{ReceivedOn}" />
      </cells>
    </ColumnListItem>
  </items>
</Table>

          </VBox>
        </IconTabFilter>

        <IconTabFilter id="_IDGenIconTabFilter4" key="lines" text="Lines" icon="sap-icon://line-chart">
          <VBox id="_IDGenVBox3">
          <Title  text="Purchase Order Line items" ></Title>
            <Table
  id="linestable"
  items="{
    path: '/PoLineItems',
    parameters: { $expand: 'parent' }
  }"
  inset="false"
  growing="true"
  growingScrollToLoad="true"
  width="100%"
  mode="None">

  <columns>
  <Column>
      <Text text="Item" />
    </Column>
    <Column><Text text="Order No" /></Column>
    <Column>
      <Text text="Material" />
    </Column>
    <Column>
      <Text text="Description" />
    </Column>
    <Column>
      <Text text="Quantity Ordered" />
    </Column>
   
    <Column>
      <Text text="Transport  Mode" />
    </Column>
  </columns>

  <items>
    <ColumnListItem>
      <cells>
       <Text text="{Item}" />
        <Text text="{parent/OrderNo}" />
        <Text text="{Material}" />
        <Text text="{Description}" />
        <Text text="{QuantityOrdered}" />
       
        <Text text="{TransportMode}" />
      </cells>
    </ColumnListItem>
  </items>
</Table>

<Title text="Receiving Line items"></Title>

 <Table
  id="Linestable"
items="{
    path: '/ReceivingLineItems',
    parameters: { $expand: 'parent($expand=parent)' }
}"
  inset="false"
  growing="true"
  growingScrollToLoad="true"
  width="100%"
  mode="None">

  <columns>
  <Column>
      <Text text="LineID" />
    </Column>
  <Column>
      <Text text="Item" />
    </Column>
    <Column><Text text="Order No" /></Column>
    <Column><Text text="Receiving Number" /></Column>
    <Column>
      <Text text="Article" />
    </Column>
    
   
  </columns>

  <items>
    <ColumnListItem>
      <cells>
      <Text text="{LineID}" />
       <Text text="{Item}" />
        <Text text="{parent/parent/OrderNo}" />
        <Text text="{parent/ReceivingNumber}" />
        <Text text="{Article}" />
        
       
      </cells>
    </ColumnListItem>
  </items>
</Table>


          </VBox>
        </IconTabFilter>

        <IconTabFilter id="_IDGenIconTabFilter5" key="shipments" text="Shipments" icon="sap-icon://shipping-status">
          <VBox id="_IDGenVBox4">
          <Table
      id="shipmentsTable"
      items="{ path: '/Shipments' }"
      growing="true"
      growingScrollToLoad="true"
      width="100%">
      
      <columns>
      <Column><Text text="Shipment ID" /></Column>
        <Column><Text text="Entity" /></Column>
        <Column><Text text="Origin" /></Column>
        <Column><Text text="Destination" /></Column>
        <Column><Text text="Transport Mode" /></Column>
        <Column><Text text="Shipment Date" /></Column>
        <Column><Text text="Estimated Delivery" /></Column>
      </columns>

      <items>
        <ColumnListItem>
          <cells>
          <Link id="_IDGenLink100" text="{ID}" press=".onShipmentNumberPress"  />
            <Text text="{Entity}" />
            <Text text="{Origin}" />
            <Text text="{Destination}" />
            <Text text="{TransportMode}" />
            <Text text="{ShipmentDate}" />
            <Text text="{Estimateddelivery}" />
          </cells>
        </ColumnListItem>
      </items>
    </Table>
          </VBox>
        </IconTabFilter>
      </items>
    </IconTabBar>

   
    </Page>
</mvc:View>